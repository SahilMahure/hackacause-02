(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&d(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const f={maharashtra:["Ahmednagar","Akola","Amravati","Aurangabad","Beed","Bhandara","Buldhana","Chandrapur","Dhule","Gadchiroli","Gondia","Hingoli","Jalgaon","Jalna","Kolhapur","Latur","Mumbai City","Mumbai Suburban","Nagpur","Nanded","Nandurbar","Nashik","Osmanabad","Palghar","Parbhani","Pune","Raigad","Ratnagiri","Sangli","Satara","Sindhudurg","Solapur","Thane","Wardha","Washim","Yavatmal"],gujarat:["Ahmedabad","Amreli","Anand","Aravalli","Banaskantha","Bharuch","Bhavnagar","Botad","Chhota Udepur","Dahod","Dang","Devbhumi Dwarka","Gandhinagar","Gir Somnath","Jamnagar","Junagadh","Kheda","Kutch","Mahisagar","Mehsana","Morbi","Narmada","Navsari","Panchmahal","Patan","Porbandar","Rajkot","Sabarkantha","Surat","Surendranagar","Tapi","Vadodara","Valsad"],rajasthan:["Ajmer","Alwar","Banswara","Baran","Barmer","Bharatpur","Bhilwara","Bikaner","Bundi","Chittorgarh","Churu","Dausa","Dholpur","Dungarpur","Hanumangarh","Jaipur","Jaisalmer","Jalore","Jhalawar","Jhunjhunu","Jodhpur","Karauli","Kota","Nagaur","Pali","Pratapgarh","Rajsamand","Sawai Madhopur","Sikar","Sirohi","Sri Ganganagar","Tonk","Udaipur"],karnataka:["Bagalkot","Ballari","Belagavi","Bengaluru Rural","Bengaluru Urban","Bidar","Chamarajanagar","Chikkaballapur","Chikkamagaluru","Chitradurga","Dakshina Kannada","Davangere","Dharwad","Gadag","Hassan","Haveri","Kalaburagi","Kodagu","Kolar","Koppal","Mandya","Mysuru","Raichur","Ramanagara","Shivamogga","Tumakuru","Udupi","Uttara Kannada","Vijayapura","Yadgir"],telangana:["Adilabad","Bhadradri Kothagudem","Hyderabad","Jagtial","Jangaon","Jayashankar Bhupalpally","Jogulamba Gadwal","Kamareddy","Karimnagar","Khammam","Kumuram Bheem","Mahabubabad","Mahabubnagar","Mancherial","Medak","Medchal","Mulugu","Nagarkurnool","Nalgonda","Narayanpet","Nirmal","Nizamabad","Peddapalli","Rajanna Sircilla","Rangareddy","Sangareddy","Siddipet","Suryapet","Vikarabad","Wanaparthy","Warangal Rural","Warangal Urban","Yadadri Bhuvanagiri"],andhra_pradesh:["Anantapur","Chittoor","East Godavari","Guntur","Kadapa","Krishna","Kurnool","Nellore","Prakasam","Srikakulam","Visakhapatnam","Vizianagaram","West Godavari"],madhya_pradesh:["Agar Malwa","Alirajpur","Anuppur","Ashoknagar","Balaghat","Barwani","Betul","Bhind","Bhopal","Burhanpur","Chhatarpur","Chhindwara","Damoh","Datia","Dewas","Dhar","Dindori","Guna","Gwalior","Harda","Hoshangabad","Indore","Jabalpur","Jhabua","Katni","Khandwa","Khargone","Mandla","Mandsaur","Morena","Narsinghpur","Neemuch","Panna","Raisen","Rajgarh","Ratlam","Rewa","Sagar","Satna","Sehore","Seoni","Shahdol","Shajapur","Sheopur","Shivpuri","Sidhi","Singrauli","Tikamgarh","Ujjain","Umaria","Vidisha"]};let i={email:"",mobile:"",dept:"",designation:"",state:"",district:""};document.addEventListener("DOMContentLoaded",()=>{var o,u,g,p,m,y,c;window.lucide&&lucide.createIcons(),initParticles(),initRouter(),initAnimations();const n=document.getElementById("loading-overlay");setTimeout(()=>{n.classList.add("hidden"),setTimeout(()=>initAnimations.heroEntrance(),400)},2200),(o=document.getElementById("login-form"))==null||o.addEventListener("submit",t=>{t.preventDefault(),i.email=document.getElementById("login-email").value,i.mobile=document.getElementById("login-mobile").value,h("verify")});const e=document.getElementById("verify-state"),r=document.getElementById("verify-jurisdiction");e==null||e.addEventListener("change",()=>{const t=e.value;r.innerHTML='<option value="">Select District</option>',t&&f[t]?(f[t].forEach(s=>{const l=document.createElement("option");l.value=s,l.textContent=s,r.appendChild(l)}),r.disabled=!1):r.disabled=!0}),(u=document.getElementById("verify-form"))==null||u.addEventListener("submit",t=>{t.preventDefault(),i.dept=document.getElementById("verify-dept").value,i.designation=document.getElementById("verify-designation").value,i.state=e.options[e.selectedIndex].text,i.district=r.value,B(),I(()=>{h("dashboard"),setTimeout(()=>{initMaps.dashboard(),initWeather(),v()},100)})}),["btn-enter-platform","btn-cta-enter"].forEach(t=>{var s;(s=document.getElementById(t))==null||s.addEventListener("click",()=>h("login"))}),(g=document.getElementById("btn-explore"))==null||g.addEventListener("click",()=>{var t;(t=document.getElementById("section-narrative"))==null||t.scrollIntoView({behavior:"smooth"})}),(p=document.getElementById("btn-logout"))==null||p.addEventListener("click",()=>{h("landing"),setTimeout(()=>initAnimations.heroEntrance(),300)}),document.querySelectorAll(".nav-link").forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const l=t.dataset.page;document.querySelectorAll(".nav-link").forEach(E=>E.classList.remove("active")),t.classList.add("active"),w(l)})});const d=document.getElementById("file-upload-zone"),a=document.getElementById("verify-id-upload");d&&a&&(d.addEventListener("click",()=>a.click()),a.addEventListener("change",()=>{a.files.length>0&&(d.querySelector("p").textContent=a.files[0].name,d.style.borderColor="var(--green)",d.style.background="rgba(34,197,94,0.05)")})),document.querySelectorAll(".filter-btn").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".filter-btn").forEach(l=>l.classList.remove("active")),t.classList.add("active");const s=t.dataset.filter;document.querySelectorAll(".alert-item").forEach(l=>{s==="all"||l.dataset.severity===s?l.style.display="block":l.style.display="none"})})}),document.querySelectorAll(".map-ctrl-btn").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".map-ctrl-btn").forEach(s=>s.classList.remove("active")),t.classList.add("active")})}),(m=document.getElementById("btn-refresh-weather"))==null||m.addEventListener("click",()=>{const t=document.getElementById("weather-grid");t.innerHTML='<div class="weather-loading"><div class="loading-spinner"></div><span>Refreshing weather data...</span></div>',setTimeout(()=>initWeather(),800)}),(y=document.getElementById("btn-optimize-routes"))==null||y.addEventListener("click",()=>{const t=document.getElementById("btn-optimize-routes"),s=t.querySelector("i"),l=t.querySelector("span");t.disabled=!0,l.textContent="Optimizing...",s.classList.add("spinning"),setTimeout(()=>{initMaps.autoOptimize(),t.disabled=!1,l.textContent="Auto-Optimize",s.classList.remove("spinning")},1500)}),(c=document.getElementById("btn-new-route"))==null||c.addEventListener("click",()=>{initMaps.showDroughtSelection()})});function B(){document.getElementById("profile-name-display").textContent=i.designation||"Collector Office",document.getElementById("profile-role-display").textContent=i.district+" "+(i.dept?i.dept:"Authority"),document.getElementById("profile-email-display").textContent=i.email,document.getElementById("profile-mobile-display").textContent="+91 "+i.mobile,document.getElementById("profile-dept-display").textContent=i.dept,document.getElementById("profile-desig-display").textContent=i.designation,document.getElementById("profile-state-display").textContent=i.state,document.getElementById("profile-juris-display").textContent=i.district,document.querySelector(".user-name").textContent=i.designation||"Collector Office",document.querySelector(".user-role").textContent=i.district+" District"}function S(){const n=document.querySelector(".profile-card");n.style.opacity="0",n.style.transform="translateY(20px)",requestAnimationFrame(()=>{n.style.transition="all 0.6s var(--ease-out)",n.style.opacity="1",n.style.transform="translateY(0)"})}function h(n){document.querySelectorAll(".page").forEach(a=>a.classList.remove("active"));const e=document.getElementById(`page-${n}`);e&&(e.classList.add("active"),window.scrollTo(0,0));const r=document.getElementById("main-nav");if(["dashboard","routing","alerts","weather"].includes(n)?r.classList.remove("hidden"):r.classList.add("hidden"),n==="login"||n==="verify"){const a=document.querySelector(`#page-${n} .glass-card`);a&&(a.style.transition="none",a.style.opacity="0",a.style.transform="translateY(20px) scale(0.98)",requestAnimationFrame(()=>{a.style.transition="opacity 0.6s var(--ease-out), transform 0.6s var(--ease-out)",a.style.opacity="1",a.style.transform="translateY(0) scale(1)"}))}}window.navigateTo=h;function w(n){["dashboard","routing","alerts","weather","profile"].forEach(d=>{const a=document.getElementById(`page-${d}`);a&&a.classList.remove("active")});const r=document.getElementById(`page-${n}`);r&&(r.classList.add("active"),window.scrollTo(0,0)),n==="routing"&&initMaps.routing(),n==="weather"&&initWeather(),n==="dashboard"&&(initMaps.dashboard(),v()),n==="alerts"&&A(),n==="profile"&&S()}function I(n){const e=document.getElementById("loading-overlay");e.classList.remove("hidden"),e.querySelector(".loading-text").textContent="Verifying credentials...";const r=e.querySelector(".loading-bar-fill");r.style.animation="none",r.offsetHeight,r.style.width="0%",requestAnimationFrame(()=>{r.style.transition="width 1.5s var(--ease-out)",r.style.width="100%"}),setTimeout(()=>{e.classList.add("hidden"),r.style.transition="none",n()},1800)}function v(){document.querySelectorAll("#dashboard-stats .stat-card").forEach((e,r)=>{e.style.transition="none",e.style.opacity="0",e.style.transform="translateY(20px)",requestAnimationFrame(()=>{setTimeout(()=>{e.style.transition="opacity 0.5s var(--ease-out), transform 0.5s var(--ease-out)",e.style.opacity="1",e.style.transform="translateY(0)"},r*100)})}),setTimeout(()=>{document.querySelectorAll("#dashboard-stats .stat-card-value").forEach(e=>{b(e,parseInt(e.dataset.count)||0)})},300)}function A(){document.querySelectorAll(".alert-item").forEach((e,r)=>{e.style.transition="none",e.style.opacity="0",e.style.transform="translateX(-20px)",requestAnimationFrame(()=>{setTimeout(()=>{e.style.transition="opacity 0.5s var(--ease-out), transform 0.5s var(--ease-out)",e.style.opacity="1",e.style.transform="translateX(0)"},r*120)})})}function b(n,e){const d=performance.now(),a=e<0,o=Math.abs(e);function u(g){const p=g-d,m=Math.min(p/1500,1),y=1-Math.pow(1-m,3);let c=Math.round(y*o);o>=1e4?n.textContent=(a?"-":"")+(c/1e3).toFixed(0)+"K":(n.textContent=""+c,a&&(n.textContent="-"+c)),m<1&&requestAnimationFrame(u)}requestAnimationFrame(u)}window.animateCounter=b;
